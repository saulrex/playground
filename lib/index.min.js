(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("d3"), require("react"), require("lodash"));
	else if(typeof define === 'function' && define.amd)
		define(["d3", "react", "lodash"], factory);
	else if(typeof exports === 'object')
		exports["showTree"] = factory(require("d3"), require("react"), require("lodash"));
	else
		root["showTree"] = factory(root["d3"], root["React"], root["_"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__7__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 9);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"node":"showTree-node--to8cW","overlay":"showTree-overlay--3vAxk","link":"showTree-link--1n_gK","templink":"showTree-templink--3QDMp","ghostCircle":"showTree-ghostCircle--QyY2M","show":"showTree-show--_LvsA","activeDrag":"showTree-activeDrag--2HnmW"};

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__1__;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


if (true) {
  module.exports = __webpack_require__(10);
} else { var jsFeaturesPresent, evalAllowed; }


/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__3__;

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = function(originalModule) {
	if (!originalModule.webpackPolyfill) {
		var module = Object.create(originalModule);
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		Object.defineProperty(module, "exports", {
			enumerable: true
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"wrap":"showTree-wrap--18ld5","mtop":"showTree-mtop--3irRk"};

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tree__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);
/* harmony import */ var _style_less__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);
/* harmony import */ var _style_less__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_less__WEBPACK_IMPORTED_MODULE_3__);
var _class,
    _temp,
    _jsxFileName = "C:\\Users\\Saul\\WebstormProjects\\showTree\\src\\app\\index.jsx";

(function () {
  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).enterModule;
  enterModule && enterModule(module);
})();

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





/**
 * this is ShowTree
 * @param {Array<{ id: number }>} [tree=Array] - tree items here
 * @example
 * import ShowTree from './showTree';
 *
 *  ReactDOM.render(
 *   <ShowTree />,
 *   element
 *  );
 * };
 *
 * runApp();
 */

var ShowTree = (_temp = _class =
/*#__PURE__*/
function (_React$PureComponent) {
  _inherits(ShowTree, _React$PureComponent);

  function ShowTree() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, ShowTree);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShowTree)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "cyRef", react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef());

    _defineProperty(_assertThisInitialized(_this), "init", function () {
      _this.tree = new _tree__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"]({
        rootNode: _this.cyRef.current,
        treeData: _this.props.tree ? _this.props.tree : {}
      });

      _this.updateTreeState();
    });

    _defineProperty(_assertThisInitialized(_this), "updateTreeState", function () {
      _this.tree.state.onClickNode = _this.props.onClickNode;
    });

    _defineProperty(_assertThisInitialized(_this), "changeLen", function (len) {
      if (_this.props.len !== len) {
        if (typeof _this.props.onChangeLen === 'function') {
          _this.props.onChangeLen(len);
        }
      }
    });

    return _this;
  }

  _createClass(ShowTree, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.init();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(_ref) {
      var tree = _ref.tree;

      if (!Object(lodash__WEBPACK_IMPORTED_MODULE_1__["isEqual"])(this.props.tree, tree)) {
        if (!this.tree) {
          return this.init();
        } else {
          this.tree.updateTree(this.props.tree);
        }
      }

      this.updateTreeState();
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
        className: _style_less__WEBPACK_IMPORTED_MODULE_3___default.a.wrap,
        ref: this.cyRef,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 69
        }
      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
        className: _style_less__WEBPACK_IMPORTED_MODULE_3___default.a.mtop,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 70
        }
      }, !this.props.tree, this.props.maxLen && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
        type: "range",
        name: "points",
        min: "1",
        max: this.props.maxLen,
        onChange: function onChange(_ref2) {
          var value = _ref2.target.value;

          _this2.changeLen(+value);
        },
        value: this.props.len,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 74
        }
      })));
    }
  }, {
    key: "__reactstandin__regenerateByEval",
    // @ts-ignore
    value: function __reactstandin__regenerateByEval(key, code) {
      // @ts-ignore
      this[key] = eval(code);
    }
  }]);

  return ShowTree;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent), _defineProperty(_class, "defaultProps", {
  len: 1
}), _temp);
var _default = ShowTree;
/* harmony default export */ __webpack_exports__["a"] = (_default);
;

(function () {
  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).default;

  if (!reactHotLoader) {
    return;
  }

  reactHotLoader.register(ShowTree, "ShowTree", "C:\\Users\\Saul\\WebstormProjects\\showTree\\src\\app\\index.jsx");
  reactHotLoader.register(_default, "default", "C:\\Users\\Saul\\WebstormProjects\\showTree\\src\\app\\index.jsx");
})();

;

(function () {
  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).leaveModule;
  leaveModule && leaveModule(module);
})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(4)(module)))

/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__7__;

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _style_less__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var _style_less__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_less__WEBPACK_IMPORTED_MODULE_1__);
var _temp;

(function () {
  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).enterModule;
  enterModule && enterModule(module);
})();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var _default = (_temp =
/*#__PURE__*/
function () {
  // Define the zoom function for the zoomable tree
  // define the zoomListener which calls the zoom function on the 'zoom' event constrained within the scaleExtents
  // Helper functions for collapsing and expanding nodes.
  // Function to update the temporary connector indicating dragging affiliation
  // Function to center node when clicked/dropped so node doesn't get lost when collapsing/moving with large amount of children.
  function _default(_ref) {
    var _this = this;

    var _rootNode = _ref.rootNode,
        _ref$treeData = _ref.treeData,
        _treeData = _ref$treeData === void 0 ? [] : _ref$treeData,
        _ref$onDragEnd = _ref.onDragEnd,
        onDragEnd = _ref$onDragEnd === void 0 ? function () {} : _ref$onDragEnd;

    _classCallCheck(this, _default);

    _defineProperty(this, "state", {
      root: undefined,
      tree: undefined,
      links: undefined,
      viewerWidth: undefined,
      viewerHeight: undefined,
      svgGroup: undefined,
      // variables for drag/drop
      selectedNode: null,
      draggingNode: null,
      dragStarted: false,
      panTimer: 0,
      // Calculate total nodes, max label length
      totalNodes: 0,
      maxLabelLength: 0,
      //events
      dragListener: function dragListener() {},
      click: function click() {},
      //bound events
      onClickNode: function onClickNode(node) {},
      //other
      duration: 300 // define a d3 diagonal projection for use by the node paths later on.

    });

    _defineProperty(this, "diagonal", d3__WEBPACK_IMPORTED_MODULE_0__["svg"].diagonal().projection(function (d) {
      return [d.y, d.x];
    }));

    _defineProperty(this, "cleanup", function (rootNode) {
      if (rootNode && rootNode.children && rootNode.children[1]) {
        rootNode.children[1].remove();
      }
    });

    _defineProperty(this, "zoom", function () {
      _this.state.svgGroup.attr('transform', 'translate(' + d3__WEBPACK_IMPORTED_MODULE_0__["event"].translate + ')scale(' + d3__WEBPACK_IMPORTED_MODULE_0__["event"].scale + ')');
    });

    _defineProperty(this, "zoomListener", d3__WEBPACK_IMPORTED_MODULE_0__["behavior"].zoom().scaleExtent([0.1, 3]).on('zoom', this.zoom));

    _defineProperty(this, "update", function (source) {
      // Compute the new height, function counts total children of root node and sets tree height accordingly.
      // This prevents the layout looking squashed when new nodes are made visible or looking sparse when nodes are removed
      // This makes the layout more consistent.
      var levelWidth = [1];

      var childCount = function childCount(level, n) {
        if (n.children && n.children.length > 0) {
          if (levelWidth.length <= level + 1) levelWidth.push(0);
          levelWidth[level + 1] += n.children.length;
          n.children.forEach(function (d) {
            childCount(level + 1, d);
          });
        }
      };

      childCount(0, _this.state.root);
      var newHeight = d3__WEBPACK_IMPORTED_MODULE_0__["max"](levelWidth) * 50; // 25 pixels per line

      _this.state.tree = _this.state.tree.size([newHeight, _this.state.viewerWidth]); // Compute the new tree layout.

      _this.state.nodes = _this.state.tree.nodes(_this.state.root).reverse();
      _this.state.links = _this.state.tree.links(_this.state.nodes); // Set widths between levels based on maxLabelLength.

      _this.state.nodes.forEach(function (d) {
        d.y = d.depth * (_this.state.maxLabelLength * 10); //maxLabelLength * 10px
        // alternatively to keep a fixed scale one can set a fixed depth per level
        // Normalize for fixed-depth by commenting out below line
        // d.y = (d.depth * 500); //500px per level.
      }); // Update the nodes…


      var i = 0;

      var node = _this.state.svgGroup.selectAll("g.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node)).data(_this.state.nodes, function (d) {
        return d.id || (d.id = ++i);
      }); // Enter any new nodes at the parent's previous position.


      var nodeEnter = node.enter().append('g').call(_this.state.dragListener).attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node).attr('transform', function (d) {
        return 'translate(' + source.y0 + ',' + source.x0 + ')';
      }).on('click', _this.state.click);
      nodeEnter.append('circle').attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.nodeCircle).attr('r', 5).style('fill', function (d) {
        return d._children ? 'lightsteelblue' : '#fff';
      });
      var TEXT_MARGIN_SIZE = 15;
      nodeEnter.append('text').attr('x', function (d) {
        return d.children || d._children ? -TEXT_MARGIN_SIZE : TEXT_MARGIN_SIZE;
      }).attr('dy', '.35em').attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.nodeText).attr('text-anchor', function (d) {
        return d.children || d._children ? 'end' : 'start';
      }).text(function (d) {
        return d.name;
      }).style('fill-opacity', 0); // phantom node to give us mouseover in a radius around it

      nodeEnter.append('circle').attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle).attr('r', 30).attr('opacity', 0.2) // change this to zero to hide the target area
      .style('fill', 'red').attr('pointer-events', 'mouseover').on('mouseover', function (node) {
        _this.overCircle(node);
      }).on('mouseout', function (node) {
        _this.outCircle(node);
      }); // Update the text to reflect whether node has children or not.

      node.select('text').attr('x', function (d) {
        return d.children || d._children ? -TEXT_MARGIN_SIZE : TEXT_MARGIN_SIZE;
      }).attr('text-anchor', function (d) {
        return d.children || d._children ? 'end' : 'start';
      }).text(function (d) {
        return d.name;
      }); // Change the circle fill depending on whether it has children and is collapsed

      node.select("circle.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.nodeCircle)).attr('r', 4.5).style('fill', function (d) {
        return d._children ? 'lightsteelblue' : '#fff';
      }); // Transition nodes to their new position.

      var nodeUpdate = node.transition().duration(_this.state.duration).attr('transform', function (d) {
        return 'translate(' + d.y + ',' + d.x + ')';
      }); // Fade the text in

      nodeUpdate.select('text').style('fill-opacity', 1); // Transition exiting nodes to the parent's new position.

      var nodeExit = node.exit().transition().duration(_this.state.duration).attr('transform', function (d) {
        return 'translate(' + source.y + ',' + source.x + ')';
      }).remove();
      nodeExit.select('circle').attr('r', 0);
      nodeExit.select('text').style('fill-opacity', 0); // Update the links…

      var link = _this.state.svgGroup.selectAll("path.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.link)).data(_this.state.links, function (d) {
        return d.target.id;
      }); // Enter any new links at the parent's previous position.


      link.enter().insert('path', 'g').attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.link).attr('d', function (d) {
        var o = {
          x: source.x0,
          y: source.y0
        };
        return _this.diagonal({
          source: o,
          target: o
        });
      }); // Transition links to their new position.

      link.transition().duration(_this.state.duration).attr('d', _this.diagonal); // Transition exiting nodes to the parent's new position.

      link.exit().transition().duration(_this.state.duration).attr('d', function (d) {
        var o = {
          x: source.x,
          y: source.y
        };
        return _this.diagonal({
          source: o,
          target: o
        });
      }).remove(); // Stash the old positions for transition.

      _this.state.nodes.forEach(function (d) {
        d.x0 = d.x;
        d.y0 = d.y;
      });
    });

    _defineProperty(this, "collapse", function (d) {
      if (d.children) {
        d._children = d.children;

        d._children.forEach(collapse);

        d.children = null;
      }
    });

    _defineProperty(this, "expand", function (d) {
      if (d._children) {
        d.children = d._children;
        d.children.forEach(expand);
        d._children = null;
      }
    });

    _defineProperty(this, "overCircle", function (d) {
      _this.state.selectedNode = d;

      _this.updateTempConnector();
    });

    _defineProperty(this, "outCircle", function (d) {
      _this.state.selectedNode = null;

      _this.updateTempConnector();
    });

    _defineProperty(this, "updateTempConnector", function () {
      var data = [];

      if (_this.state.draggingNode !== null && _this.state.selectedNode !== null) {
        // have to flip the source coordinates since we did this for the existing connectors on the original tree
        data = [{
          source: {
            x: _this.state.selectedNode.y0,
            y: _this.state.selectedNode.x0
          },
          target: {
            x: _this.state.draggingNode.y0,
            y: _this.state.draggingNode.x0
          }
        }];
      }

      var link = _this.state.svgGroup.selectAll(".".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.templink)).data(data);

      link.enter().append('path').attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.templink).attr('d', d3__WEBPACK_IMPORTED_MODULE_0__["svg"].diagonal()).attr('pointer-events', 'none');
      link.attr('d', d3__WEBPACK_IMPORTED_MODULE_0__["svg"].diagonal());
      link.exit().remove();
    });

    _defineProperty(this, "toStartPosition", function (source, toCenter) {
      var scale = _this.zoomListener.scale();

      var x = -source.y0;
      var y = -source.x0;
      x = x * scale + _this.state.viewerWidth / 2;
      y = y * scale + _this.state.viewerHeight / 2;
      d3__WEBPACK_IMPORTED_MODULE_0__["select"]('g').transition().duration(_this.state.duration).attr('transform', 'translate(' + x + ',' + y + ')scale(' + scale + ')');

      _this.zoomListener.scale(scale);

      _this.zoomListener.translate([x, y]);
    });

    _defineProperty(this, "endDrag", function (domNode) {
      _this.state.selectedNode = null;
      d3__WEBPACK_IMPORTED_MODULE_0__["selectAll"](".".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle)).attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle);
      d3__WEBPACK_IMPORTED_MODULE_0__["select"](domNode).attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node); // now restore the mouseover event or we won't be able to drag a 2nd time

      d3__WEBPACK_IMPORTED_MODULE_0__["select"](domNode).select(".".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle)).attr('pointer-events', '');

      _this.updateTempConnector();

      if (_this.state.draggingNode !== null) {
        _this.update(_this.state.root);

        _this.toStartPosition(_this.state.draggingNode);

        _this.state.draggingNode = null;
      }
    });

    _defineProperty(this, "updateTree", function (treeData, toStart) {
      // A recursive helper function for performing some setup by walking through all nodes
      function visit(parent, visitFn, childrenFn) {
        if (!parent) return;
        visitFn(parent);
        var children = childrenFn(parent);

        if (children) {
          var count = children.length;

          for (var i = 0; i < count; i++) {
            visit(children[i], visitFn, childrenFn);
          }
        }
      } // Call visit function to establish maxLabelLength


      visit(treeData, function (_ref2) {
        var _ref2$name = _ref2.name,
            name = _ref2$name === void 0 ? '' : _ref2$name;
        _this.state.totalNodes++;
        _this.state.maxLabelLength = Math.max(name.length, _this.state.maxLabelLength);
      }, function (d) {
        return d.children && d.children.length > 0 ? d.children : null;
      }); // Define the root

      _this.state.root = treeData;
      _this.state.root.x0 = _this.state.viewerHeight / 2;
      _this.state.root.y0 = 0; // Layout the tree initially and center on the root node.

      _this.update(_this.state.root);

      if (toStart) {
        _this.toStartPosition(_this.state.root);
      }
    });

    this.cleanup(_rootNode); // panning variables

    var panSpeed = 200;
    var panBoundary = 20; // Within 20px from edges will pan when dragging.

    this.state.viewerWidth = _rootNode.offsetWidth;
    this.state.viewerHeight = _rootNode.offsetHeight;
    this.state.tree = d3__WEBPACK_IMPORTED_MODULE_0__["layout"].tree().size([this.state.viewerHeight, this.state.viewerWidth]); // // sort the tree according to the node names
    //
    // function sortTree() {
    //   tree.sort(function(a, b) {
    //     return b.name.toLowerCase() < a.name.toLowerCase() ? 1 : -1;
    //   });
    // }
    // // Sort the tree initially incase the JSON isn't in a sorted order.
    // sortTree();
    // TODO: Pan function, can be better implemented.

    var translateX, translateY;

    var pan = function pan(domNode, direction) {
      var speed = panSpeed;

      if (_this.state.panTimer) {
        clearTimeout(_this.state.panTimer);
        var translateCoords = d3__WEBPACK_IMPORTED_MODULE_0__["transform"](_this.state.svgGroup.attr('transform'));

        if (direction == 'left' || direction == 'right') {
          translateX = direction == 'left' ? translateCoords.translate[0] + speed : translateCoords.translate[0] - speed;
          translateY = translateCoords.translate[1];
        } else if (direction == 'up' || direction == 'down') {
          translateX = translateCoords.translate[0];
          translateY = direction == 'up' ? translateCoords.translate[1] + speed : translateCoords.translate[1] - speed;
        }

        var scaleX = translateCoords.scale[0];
        var scaleY = translateCoords.scale[1];

        var scale = _this.zoomListener.scale();

        _this.state.svgGroup.transition().attr('transform', 'translate(' + translateX + ',' + translateY + ')scale(' + scale + ')');

        d3__WEBPACK_IMPORTED_MODULE_0__["select"](domNode).select("g.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node)).attr('transform', 'translate(' + translateX + ',' + translateY + ')');

        _this.zoomListener.scale(_this.zoomListener.scale());

        _this.zoomListener.translate([translateX, translateY]);

        _this.zoomListener.translate([translateX, translateY]);

        _this.state.panTimer = setTimeout(function () {
          pan(domNode, speed, direction);
        }, 50);
      }
    };

    var initiateDrag = function initiateDrag(d, domNode) {
      _this.state.draggingNode = d;
      d3__WEBPACK_IMPORTED_MODULE_0__["select"](domNode).select(".".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle)).attr('pointer-events', 'none');
      d3__WEBPACK_IMPORTED_MODULE_0__["selectAll"](".".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle)).attr('class', "".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.ghostCircle, " ").concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.show));
      d3__WEBPACK_IMPORTED_MODULE_0__["select"](domNode).attr('class', "".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node, " ").concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.activeDrag));

      _this.state.svgGroup.selectAll("g.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node)).sort(function (a, b) {
        // select the parent and sort the path's
        if (a.id != _this.state.draggingNode.id) return 1; // a is not the hovered element, send 'a' to the back
        else return -1; // a is the hovered element, bring 'a' to the front
      }); // if nodes has children, remove the links and nodes


      if (_this.state.nodes.length > 1) {
        // remove link paths
        var links = _this.state.tree.links(_this.state.nodes);

        var nodePaths = _this.state.svgGroup.selectAll("path.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.link)).data(links, function (d) {
          return d.target.id;
        }).remove(); // remove child nodes


        var nodesExit = _this.state.svgGroup.selectAll("g.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.node)).data(_this.state.nodes, function (d) {
          return d.id;
        }).filter(function (d, i) {
          if (d.id == _this.state.draggingNode.id) {
            return false;
          }

          return true;
        }).remove();
      } // remove parent link


      var parentLink = _this.state.tree.links(_this.state.tree.nodes(_this.state.draggingNode.parent));

      _this.state.svgGroup.selectAll("path.".concat(_style_less__WEBPACK_IMPORTED_MODULE_1___default.a.link)).filter(function (d, i) {
        if (d.target.id == _this.state.draggingNode.id) {
          return true;
        }

        return false;
      }).remove();

      _this.state.dragStarted = null;
    }; // define the baseSvg, attaching a class for styling and the zoomListener


    var baseSvg = d3__WEBPACK_IMPORTED_MODULE_0__["select"](_rootNode).append('svg').attr('width', this.state.viewerWidth).attr('height', this.state.viewerHeight).attr('class', _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.overlay).call(this.zoomListener);
    var self = this; // Define the drag listeners for drag/drop behaviour of nodes.

    this.state.dragListener = d3__WEBPACK_IMPORTED_MODULE_0__["behavior"].drag().on('dragstart', function (d) {
      if (d == self.state.root) {
        return;
      }

      self.state.dragStarted = true;
      self.state.nodes = self.state.tree.nodes(d);
      d3__WEBPACK_IMPORTED_MODULE_0__["event"].sourceEvent.stopPropagation(); // it's important that we suppress the mouseover event on the node being dragged. Otherwise it will absorb the mouseover event and the underlying node will not detect it d3.select(this).attr('pointer-events', 'none');
    }).on('drag', function (d) {
      if (d == root) {
        return;
      }

      if (self.state.dragStarted) {
        initiateDrag(d, this);
      } // get coords of mouseEvent relative to svg container to allow for panning


      var relCoords = d3__WEBPACK_IMPORTED_MODULE_0__["mouse"](baseSvg[0][0]);

      if (relCoords[0] < panBoundary) {
        self.state.panTimer = true;
        pan(this, 'left');
      } else if (relCoords[0] > baseSvg[0][0].innerWidth - panBoundary) {
        self.state.panTimer = true;
        pan(this, 'right');
      } else if (relCoords[1] < panBoundary) {
        self.state.panTimer = true;
        pan(this, 'up');
      } else if (relCoords[1] > baseSvg[0][0].innerHeight - panBoundary) {
        self.state.panTimer = true;
        pan(this, 'down');
      } else {
        try {
          clearTimeout(self.state.panTimer);
        } catch (e) {}
      }

      d.x0 += d3__WEBPACK_IMPORTED_MODULE_0__["event"].dy;
      d.y0 += d3__WEBPACK_IMPORTED_MODULE_0__["event"].dx;
      var node = d3__WEBPACK_IMPORTED_MODULE_0__["select"](this);
      node.attr('transform', 'translate(' + d.y0 + ',' + d.x0 + ')');
      self.updateTempConnector();
    }).on('dragend', function (d) {
      if (d == self.state.root) {
        return;
      }

      var domNode = this;

      if (self.state.selectedNode) {
        onDragEnd(self.state.selectedNode); // now remove the element from the parent, and insert it into the new elements children

        var index = self.state.draggingNode.parent.children.indexOf(self.state.draggingNode);

        if (index > -1) {
          self.state.draggingNode.parent.children.splice(index, 1);
        }

        if (typeof self.state.selectedNode.children !== 'undefined' || typeof self.state.selectedNode._children !== 'undefined') {
          if (typeof self.state.selectedNode.children !== 'undefined') {
            self.state.selectedNode.children.push(self.state.draggingNode);
          } else {
            self.state.selectedNode._children.push(self.state.draggingNode);
          }
        } else {
          self.state.selectedNode.children = [];
          self.state.selectedNode.children.push(self.state.draggingNode);
        } // Make sure that the node being added to is expanded so user can see added node is correctly moved


        self.expand(self.state.selectedNode); // sortTree();
      }

      self.endDrag(domNode);
    }); // Toggle children function

    function toggleChildren(d) {
      if (d.children) {
        d._children = d.children;
        d.children = null;
      } else if (d._children) {
        d.children = d._children;
        d._children = null;
      }

      return d;
    } // Toggle children on click.


    this.state.click = function (d) {
      if (d3__WEBPACK_IMPORTED_MODULE_0__["event"].defaultPrevented) return; // click suppressed

      d = toggleChildren(d);

      _this.update(d);

      _this.toStartPosition(d, true);

      _this.state.onClickNode(d, !d._children);
    }; // Append a group which holds all nodes and which the zoom Listener can act upon.


    this.state.svgGroup = baseSvg.append('g');
    this.updateTree(_treeData, true);
  }

  _createClass(_default, [{
    key: "__reactstandin__regenerateByEval",
    // @ts-ignore
    value: function __reactstandin__regenerateByEval(key, code) {
      // @ts-ignore
      this[key] = eval(code);
    }
  }]);

  return _default;
}(), _temp);

/* harmony default export */ __webpack_exports__["a"] = (_default);
;

(function () {
  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).default;

  if (!reactHotLoader) {
    return;
  }

  reactHotLoader.register(_default, "default", "C:\\Users\\Saul\\WebstormProjects\\showTree\\src\\tree\\index.js");
})();

;

(function () {
  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).leaveModule;
  leaveModule && leaveModule(module);
})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(4)(module)))

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6);
(function () {
  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).enterModule;
  enterModule && enterModule(module);
})();


var _default = _app__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"];
/* harmony default export */ __webpack_exports__["default"] = (_default);
;

(function () {
  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).default;

  if (!reactHotLoader) {
    return;
  }

  reactHotLoader.register(_default, "default", "C:\\Users\\Saul\\WebstormProjects\\showTree\\src\\index.js");
})();

;

(function () {
  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : __webpack_require__(2)).leaveModule;
  leaveModule && leaveModule(module);
})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(4)(module)))

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(__webpack_require__(3));function AppContainer(e){return React.Children.only(e.children)}var hot_prod=function(){return function(e){return e}},areComponentsEqual=function(e,n){return e===n},setConfig=function(){},cold=function(e){return e},configureComponent=function(){};exports.AppContainer=AppContainer,exports.hot=hot_prod,exports.areComponentsEqual=areComponentsEqual,exports.setConfig=setConfig,exports.cold=cold,exports.configureComponent=configureComponent;


/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaG93VHJlZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vc2hvd1RyZWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2hvd1RyZWUvLi9zcmMvdHJlZS9zdHlsZS5sZXNzIiwid2VicGFjazovL3Nob3dUcmVlL2V4dGVybmFsIFwiZDNcIiIsIndlYnBhY2s6Ly9zaG93VHJlZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL2luZGV4LmpzIiwid2VicGFjazovL3Nob3dUcmVlL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiY29tbW9uanMyXCI6XCJyZWFjdFwiLFwiYW1kXCI6XCJyZWFjdFwiLFwicm9vdFwiOlwiUmVhY3RcIn0iLCJ3ZWJwYWNrOi8vc2hvd1RyZWUvKHdlYnBhY2spL2J1aWxkaW4vaGFybW9ueS1tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vc2hvd1RyZWUvLi9zcmMvYXBwL3N0eWxlLmxlc3MiLCJ3ZWJwYWNrOi8vc2hvd1RyZWUvLi9zcmMvYXBwL2luZGV4LmpzeCIsIndlYnBhY2s6Ly9zaG93VHJlZS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwibG9kYXNoXCIsXCJjb21tb25qczJcIjpcImxvZGFzaFwiLFwiYW1kXCI6XCJsb2Rhc2hcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vc2hvd1RyZWUvLi9zcmMvdHJlZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9zaG93VHJlZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zaG93VHJlZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL2Rpc3QvcmVhY3QtaG90LWxvYWRlci5wcm9kdWN0aW9uLm1pbi5qcyJdLCJuYW1lcyI6WyJTaG93VHJlZSIsIlJlYWN0IiwiY3JlYXRlUmVmIiwidHJlZSIsInJvb3ROb2RlIiwiY3lSZWYiLCJjdXJyZW50IiwidHJlZURhdGEiLCJwcm9wcyIsInVwZGF0ZVRyZWVTdGF0ZSIsInN0YXRlIiwib25DbGlja05vZGUiLCJsZW4iLCJvbkNoYW5nZUxlbiIsImluaXQiLCJpc0VxdWFsIiwidXBkYXRlVHJlZSIsInN0eWxlIiwid3JhcCIsIm10b3AiLCJtYXhMZW4iLCJ2YWx1ZSIsInRhcmdldCIsImNoYW5nZUxlbiIsIlB1cmVDb21wb25lbnQiLCJvbkRyYWdFbmQiLCJyb290IiwidW5kZWZpbmVkIiwibGlua3MiLCJ2aWV3ZXJXaWR0aCIsInZpZXdlckhlaWdodCIsInN2Z0dyb3VwIiwic2VsZWN0ZWROb2RlIiwiZHJhZ2dpbmdOb2RlIiwiZHJhZ1N0YXJ0ZWQiLCJwYW5UaW1lciIsInRvdGFsTm9kZXMiLCJtYXhMYWJlbExlbmd0aCIsImRyYWdMaXN0ZW5lciIsImNsaWNrIiwibm9kZSIsImR1cmF0aW9uIiwiZDMiLCJkaWFnb25hbCIsInByb2plY3Rpb24iLCJkIiwieSIsIngiLCJjaGlsZHJlbiIsInJlbW92ZSIsImF0dHIiLCJ0cmFuc2xhdGUiLCJzY2FsZSIsInpvb20iLCJzY2FsZUV4dGVudCIsIm9uIiwic291cmNlIiwibGV2ZWxXaWR0aCIsImNoaWxkQ291bnQiLCJsZXZlbCIsIm4iLCJsZW5ndGgiLCJwdXNoIiwiZm9yRWFjaCIsIm5ld0hlaWdodCIsInNpemUiLCJub2RlcyIsInJldmVyc2UiLCJkZXB0aCIsImkiLCJzZWxlY3RBbGwiLCJkYXRhIiwiaWQiLCJub2RlRW50ZXIiLCJlbnRlciIsImFwcGVuZCIsImNhbGwiLCJ5MCIsIngwIiwibm9kZUNpcmNsZSIsIl9jaGlsZHJlbiIsIlRFWFRfTUFSR0lOX1NJWkUiLCJub2RlVGV4dCIsInRleHQiLCJuYW1lIiwiZ2hvc3RDaXJjbGUiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwic2VsZWN0Iiwibm9kZVVwZGF0ZSIsInRyYW5zaXRpb24iLCJub2RlRXhpdCIsImV4aXQiLCJsaW5rIiwiaW5zZXJ0IiwibyIsImNvbGxhcHNlIiwiZXhwYW5kIiwidXBkYXRlVGVtcENvbm5lY3RvciIsInRlbXBsaW5rIiwidG9DZW50ZXIiLCJ6b29tTGlzdGVuZXIiLCJkb21Ob2RlIiwidXBkYXRlIiwidG9TdGFydFBvc2l0aW9uIiwidG9TdGFydCIsInZpc2l0IiwicGFyZW50IiwidmlzaXRGbiIsImNoaWxkcmVuRm4iLCJjb3VudCIsIk1hdGgiLCJtYXgiLCJjbGVhbnVwIiwicGFuU3BlZWQiLCJwYW5Cb3VuZGFyeSIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJwYW4iLCJkaXJlY3Rpb24iLCJzcGVlZCIsImNsZWFyVGltZW91dCIsInRyYW5zbGF0ZUNvb3JkcyIsInNjYWxlWCIsInNjYWxlWSIsInNldFRpbWVvdXQiLCJpbml0aWF0ZURyYWciLCJzaG93IiwiYWN0aXZlRHJhZyIsInNvcnQiLCJhIiwiYiIsIm5vZGVQYXRocyIsIm5vZGVzRXhpdCIsImZpbHRlciIsInBhcmVudExpbmsiLCJiYXNlU3ZnIiwib3ZlcmxheSIsInNlbGYiLCJkcmFnIiwic291cmNlRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJyZWxDb29yZHMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJlIiwiZHkiLCJkeCIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImVuZERyYWciLCJ0b2dnbGVDaGlsZHJlbiIsImRlZmF1bHRQcmV2ZW50ZWQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBMEMsZ0NBQWdDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0VBQXdELGtCQUFrQjtB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O0FBQ0EsV0FBSSxDQUFDbkMsS0FBTCxDQUFXQyxXQUFYLENBQXVCa0MsQ0FBdkIsRUFBMEIsQ0FBQ0EsQ0FBQyxDQUFDbUMsU0FBN0I7QUFDRCxLQU5ELENBdE02RCxDQThNN0Q7OztBQUNBLFNBQUt0RSxLQUFMLENBQVdxQixRQUFYLEdBQXNCMkcsT0FBTyxDQUFDL0QsTUFBUixDQUFlLEdBQWYsQ0FBdEI7QUFFQSxTQUFLM0QsVUFBTCxDQUFnQlQsU0FBaEIsRUFBeUIsSUFBekI7QUFDRDs7Ozs7Ozs7Ozs7Ozs7QUE1aUJZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKZjtlQUVlUCxvRDtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ZGLDRCQUE0Qix3REFBd0QsNENBQTRDLFNBQVMsRUFBRSwwQkFBMEIsbUJBQU8sQ0FBQyxDQUFPLEdBQUcseUJBQXlCLHVDQUF1Qyx3QkFBd0IsbUJBQW1CLFVBQVUsa0NBQWtDLGFBQWEsdUJBQXVCLGtCQUFrQixTQUFTLGlDQUFpQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJkM1wiKSwgcmVxdWlyZShcInJlYWN0XCIpLCByZXF1aXJlKFwibG9kYXNoXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImQzXCIsIFwicmVhY3RcIiwgXCJsb2Rhc2hcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wic2hvd1RyZWVcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJkM1wiKSwgcmVxdWlyZShcInJlYWN0XCIpLCByZXF1aXJlKFwibG9kYXNoXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJzaG93VHJlZVwiXSA9IGZhY3Rvcnkocm9vdFtcImQzXCJdLCByb290W1wiUmVhY3RcIl0sIHJvb3RbXCJfXCJdKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzdfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOSk7XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbm1vZHVsZS5leHBvcnRzID0ge1wibm9kZVwiOlwic2hvd1RyZWUtbm9kZS0tdG84Y1dcIixcIm92ZXJsYXlcIjpcInNob3dUcmVlLW92ZXJsYXktLTN2QXhrXCIsXCJsaW5rXCI6XCJzaG93VHJlZS1saW5rLS0xbl9nS1wiLFwidGVtcGxpbmtcIjpcInNob3dUcmVlLXRlbXBsaW5rLS0zUURNcFwiLFwiZ2hvc3RDaXJjbGVcIjpcInNob3dUcmVlLWdob3N0Q2lyY2xlLS1ReVkyTVwiLFwic2hvd1wiOlwic2hvd1RyZWUtc2hvdy0tX0x2c0FcIixcImFjdGl2ZURyYWdcIjpcInNob3dUcmVlLWFjdGl2ZURyYWctLTJIbm1XXCJ9OyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fOyIsIid1c2Ugc3RyaWN0J1xuXG5pZiAoIW1vZHVsZS5ob3QgfHwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZGlzdC9yZWFjdC1ob3QtbG9hZGVyLnByb2R1Y3Rpb24ubWluLmpzJyk7XG59IGVsc2Uge1xuICB2YXIgZXZhbEFsbG93ZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBldmFsKCdldmFsQWxsb3dlZCA9IHRydWUnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGV2YWwgbm90IGFsbG93ZWQgZHVlIHRvIENTUFxuICB9XG5cbiAgLy8gUkhMIG5lZWRzIHNldFByb3RvdHlwZU9mIHRvIG9wZXJhdGUgQ29tcG9uZW50IGluaGVyaXRhbmNlLCBhbmQgZXZhbCB0byBwYXRjaCBtZXRob2RzXG4gIHZhciBqc0ZlYXR1cmVzUHJlc2VudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICEhT2JqZWN0LnNldFByb3RvdHlwZU9mO1xuXG4gIGlmICghanNGZWF0dXJlc1ByZXNlbnQgJiYgZXZhbEFsbG93ZWQpIHtcbiAgICAvLyB3ZSBhcmUgbm90IGluIHByb2QgbW9kZSwgYnV0IFJITCBjb3VsZCBub3QgYmUgYWN0aXZhdGVkXG4gICAgY29uc29sZS53YXJuKCdSZWFjdC1Ib3QtTG9hZGVyIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kaXN0L3JlYWN0LWhvdC1sb2FkZXIucHJvZHVjdGlvbi5taW4uanMnKTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5yZWFjdEhvdExvYWRlckdsb2JhbCA9IHJlcXVpcmUoJy4vZGlzdC9yZWFjdC1ob3QtbG9hZGVyLmRldmVsb3BtZW50LmpzJyk7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3JpZ2luYWxNb2R1bGUpIHtcblx0aWYgKCFvcmlnaW5hbE1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHR2YXIgbW9kdWxlID0gT2JqZWN0LmNyZWF0ZShvcmlnaW5hbE1vZHVsZSk7XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiZXhwb3J0c1wiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn07XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbm1vZHVsZS5leHBvcnRzID0ge1wid3JhcFwiOlwic2hvd1RyZWUtd3JhcC0tMThsZDVcIixcIm10b3BcIjpcInNob3dUcmVlLW10b3AtLTNpclJrXCJ9OyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGlzRXF1YWwgfSBmcm9tICdsb2Rhc2gnO1xyXG5cclxuaW1wb3J0IHRyZWUgZnJvbSAnLi4vdHJlZSc7XHJcblxyXG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZS5sZXNzJztcclxuXHJcbi8qKlxyXG4gKiB0aGlzIGlzIFNob3dUcmVlXHJcbiAqIEBwYXJhbSB7QXJyYXk8eyBpZDogbnVtYmVyIH0+fSBbdHJlZT1BcnJheV0gLSB0cmVlIGl0ZW1zIGhlcmVcclxuICogQGV4YW1wbGVcclxuICogaW1wb3J0IFNob3dUcmVlIGZyb20gJy4vc2hvd1RyZWUnO1xyXG4gKlxyXG4gKiAgUmVhY3RET00ucmVuZGVyKFxyXG4gKiAgIDxTaG93VHJlZSAvPixcclxuICogICBlbGVtZW50XHJcbiAqICApO1xyXG4gKiB9O1xyXG4gKlxyXG4gKiBydW5BcHAoKTtcclxuICovXHJcbmNvbnN0IFNob3dUcmVlID0gY2xhc3MgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcclxuXHJcbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGxlbjogMSxcclxuICB9XHJcblxyXG4gIGN5UmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5pbml0KClcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSh7IHRyZWUgfSkge1xyXG4gICAgaWYgKCFpc0VxdWFsKHRoaXMucHJvcHMudHJlZSwgdHJlZSkpIHtcclxuICAgICAgaWYgKCF0aGlzLnRyZWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbml0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy50cmVlLnVwZGF0ZVRyZWUodGhpcy5wcm9wcy50cmVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlVHJlZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKCkgPT4ge1xyXG4gICAgdGhpcy50cmVlID0gbmV3IHRyZWUoe1xyXG4gICAgICByb290Tm9kZTogdGhpcy5jeVJlZi5jdXJyZW50LFxyXG4gICAgICB0cmVlRGF0YTogdGhpcy5wcm9wcy50cmVlID8gdGhpcy5wcm9wcy50cmVlIDoge30sXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVRyZWVTdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVHJlZVN0YXRlID0gKCkgPT4ge1xyXG4gICAgdGhpcy50cmVlLnN0YXRlLm9uQ2xpY2tOb2RlID0gdGhpcy5wcm9wcy5vbkNsaWNrTm9kZTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUxlbiA9IChsZW4pID0+IHtcclxuICAgIGlmICh0aGlzLnByb3BzLmxlbiAhPT0gbGVuKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vbkNoYW5nZUxlbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2VMZW4obGVuKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlLndyYXB9IHJlZj17dGhpcy5jeVJlZn0+XHJcbiAgICAgICAgezxkaXYgY2xhc3NOYW1lPXtzdHlsZS5tdG9wfT5cclxuICAgICAgICAgIHsvKjxidXR0b24gY2xhc3NOYW1lPXtzdHlsZS5idG5DdWJlfT4rPC9idXR0b24+Ki99XHJcbiAgICAgICAgICB7Lyo8YnV0dG9uIGNsYXNzTmFtZT17c3R5bGUuYnRuQ3ViZX0+LTwvYnV0dG9uPiovfVxyXG4gICAgICAgICAgeyF0aGlzLnByb3BzLnRyZWV9XHJcbiAgICAgICAgICB7dGhpcy5wcm9wcy5tYXhMZW4gJiYgPGlucHV0XHJcbiAgICAgICAgICAgIHR5cGU9XCJyYW5nZVwiXHJcbiAgICAgICAgICAgIG5hbWU9XCJwb2ludHNcIlxyXG4gICAgICAgICAgICBtaW49XCIxXCJcclxuICAgICAgICAgICAgbWF4PXt0aGlzLnByb3BzLm1heExlbn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9eyh7IHRhcmdldDogeyB2YWx1ZSB9IH0pID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmNoYW5nZUxlbigrdmFsdWUpXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmxlbn1cclxuICAgICAgICAgIC8+fVxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3dUcmVlO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzdfXzsiLCJpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XHJcblxyXG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZS5sZXNzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG4gIHN0YXRlID0ge1xyXG4gICAgcm9vdDogdW5kZWZpbmVkLFxyXG4gICAgdHJlZTogdW5kZWZpbmVkLFxyXG4gICAgbGlua3M6IHVuZGVmaW5lZCxcclxuICAgIHZpZXdlcldpZHRoOiB1bmRlZmluZWQsXHJcbiAgICB2aWV3ZXJIZWlnaHQ6IHVuZGVmaW5lZCxcclxuICAgIHN2Z0dyb3VwOiB1bmRlZmluZWQsXHJcbiAgICAvLyB2YXJpYWJsZXMgZm9yIGRyYWcvZHJvcFxyXG4gICAgc2VsZWN0ZWROb2RlOiBudWxsLFxyXG4gICAgZHJhZ2dpbmdOb2RlOiBudWxsLFxyXG4gICAgZHJhZ1N0YXJ0ZWQ6IGZhbHNlLFxyXG4gICAgcGFuVGltZXI6IDAsXHJcbiAgICAvLyBDYWxjdWxhdGUgdG90YWwgbm9kZXMsIG1heCBsYWJlbCBsZW5ndGhcclxuICAgIHRvdGFsTm9kZXM6IDAsXHJcbiAgICBtYXhMYWJlbExlbmd0aDogMCxcclxuICAgIC8vZXZlbnRzXHJcbiAgICBkcmFnTGlzdGVuZXI6ICgpID0+IHt9LFxyXG4gICAgY2xpY2s6ICgpID0+IHt9LFxyXG4gICAgLy9ib3VuZCBldmVudHNcclxuICAgIG9uQ2xpY2tOb2RlOiAobm9kZSkgPT4ge30sXHJcbiAgICAvL290aGVyXHJcbiAgICBkdXJhdGlvbjogMzAwLFxyXG4gIH1cclxuXHJcbiAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gIGRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKClcclxuICAgIC5wcm9qZWN0aW9uKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgIHJldHVybiBbZC55LCBkLnhdO1xyXG4gICAgfSk7XHJcblxyXG4gIGNsZWFudXAgPSAocm9vdE5vZGUpID0+IHtcclxuICAgIGlmIChyb290Tm9kZSAmJiByb290Tm9kZS5jaGlsZHJlbiAmJiByb290Tm9kZS5jaGlsZHJlblsxXSkge1xyXG4gICAgICByb290Tm9kZS5jaGlsZHJlblsxXS5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIERlZmluZSB0aGUgem9vbSBmdW5jdGlvbiBmb3IgdGhlIHpvb21hYmxlIHRyZWVcclxuICB6b29tID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zdGF0ZS5zdmdHcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBkMy5ldmVudC50cmFuc2xhdGUgKyAnKXNjYWxlKCcgKyBkMy5ldmVudC5zY2FsZSArICcpJyk7XHJcbiAgfVxyXG5cclxuICAvLyBkZWZpbmUgdGhlIHpvb21MaXN0ZW5lciB3aGljaCBjYWxscyB0aGUgem9vbSBmdW5jdGlvbiBvbiB0aGUgJ3pvb20nIGV2ZW50IGNvbnN0cmFpbmVkIHdpdGhpbiB0aGUgc2NhbGVFeHRlbnRzXHJcbiAgem9vbUxpc3RlbmVyID0gZDMuYmVoYXZpb3Iuem9vbSgpLnNjYWxlRXh0ZW50KFswLjEsIDNdKS5vbignem9vbScsIHRoaXMuem9vbSk7XHJcblxyXG4gIHVwZGF0ZSA9IChzb3VyY2UpID0+IHtcclxuICAgIC8vIENvbXB1dGUgdGhlIG5ldyBoZWlnaHQsIGZ1bmN0aW9uIGNvdW50cyB0b3RhbCBjaGlsZHJlbiBvZiByb290IG5vZGUgYW5kIHNldHMgdHJlZSBoZWlnaHQgYWNjb3JkaW5nbHkuXHJcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBsYXlvdXQgbG9va2luZyBzcXVhc2hlZCB3aGVuIG5ldyBub2RlcyBhcmUgbWFkZSB2aXNpYmxlIG9yIGxvb2tpbmcgc3BhcnNlIHdoZW4gbm9kZXMgYXJlIHJlbW92ZWRcclxuICAgIC8vIFRoaXMgbWFrZXMgdGhlIGxheW91dCBtb3JlIGNvbnNpc3RlbnQuXHJcbiAgICBjb25zdCBsZXZlbFdpZHRoID0gWzFdO1xyXG4gICAgY29uc3QgY2hpbGRDb3VudCA9IChsZXZlbCwgbikgPT4ge1xyXG5cclxuICAgICAgaWYgKG4uY2hpbGRyZW4gJiYgbi5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaWYgKGxldmVsV2lkdGgubGVuZ3RoIDw9IGxldmVsICsgMSkgbGV2ZWxXaWR0aC5wdXNoKDApO1xyXG5cclxuICAgICAgICBsZXZlbFdpZHRoW2xldmVsICsgMV0gKz0gbi5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgbi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICBjaGlsZENvdW50KGxldmVsICsgMSwgZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBjaGlsZENvdW50KDAsIHRoaXMuc3RhdGUucm9vdCk7XHJcbiAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogNTA7IC8vIDI1IHBpeGVscyBwZXIgbGluZVxyXG4gICAgdGhpcy5zdGF0ZS50cmVlID0gdGhpcy5zdGF0ZS50cmVlLnNpemUoW25ld0hlaWdodCwgdGhpcy5zdGF0ZS52aWV3ZXJXaWR0aF0pO1xyXG5cclxuICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cclxuICAgIHRoaXMuc3RhdGUubm9kZXMgPSB0aGlzLnN0YXRlLnRyZWUubm9kZXModGhpcy5zdGF0ZS5yb290KS5yZXZlcnNlKCk7XHJcbiAgICB0aGlzLnN0YXRlLmxpbmtzID0gdGhpcy5zdGF0ZS50cmVlLmxpbmtzKHRoaXMuc3RhdGUubm9kZXMpO1xyXG5cclxuICAgIC8vIFNldCB3aWR0aHMgYmV0d2VlbiBsZXZlbHMgYmFzZWQgb24gbWF4TGFiZWxMZW5ndGguXHJcbiAgICB0aGlzLnN0YXRlLm5vZGVzLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgZC55ID0gKGQuZGVwdGggKiAodGhpcy5zdGF0ZS5tYXhMYWJlbExlbmd0aCAqIDEwKSk7IC8vbWF4TGFiZWxMZW5ndGggKiAxMHB4XHJcbiAgICAgIC8vIGFsdGVybmF0aXZlbHkgdG8ga2VlcCBhIGZpeGVkIHNjYWxlIG9uZSBjYW4gc2V0IGEgZml4ZWQgZGVwdGggcGVyIGxldmVsXHJcbiAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGggYnkgY29tbWVudGluZyBvdXQgYmVsb3cgbGluZVxyXG4gICAgICAvLyBkLnkgPSAoZC5kZXB0aCAqIDUwMCk7IC8vNTAwcHggcGVyIGxldmVsLlxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBub2Rlc+KAplxyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3Qgbm9kZSA9IHRoaXMuc3RhdGUuc3ZnR3JvdXAuc2VsZWN0QWxsKGBnLiR7c3R5bGUubm9kZX1gKVxyXG4gICAgICAuZGF0YSh0aGlzLnN0YXRlLm5vZGVzLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgIHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICBjb25zdCBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKCdnJylcclxuICAgICAgLmNhbGwodGhpcy5zdGF0ZS5kcmFnTGlzdGVuZXIpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsIHN0eWxlLm5vZGUpXHJcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBzb3VyY2UueTAgKyAnLCcgKyBzb3VyY2UueDAgKyAnKSc7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5vbignY2xpY2snLCB0aGlzLnN0YXRlLmNsaWNrKTtcclxuXHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCBzdHlsZS5ub2RlQ2lyY2xlKVxyXG4gICAgICAuYXR0cigncicsIDUpXHJcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gJ2xpZ2h0c3RlZWxibHVlJyA6ICcjZmZmJztcclxuICAgICAgfSk7XHJcblxyXG4gICAgY29uc3QgVEVYVF9NQVJHSU5fU0laRSA9IDE1O1xyXG5cclxuICAgIG5vZGVFbnRlci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAuYXR0cigneCcsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtVEVYVF9NQVJHSU5fU0laRSA6IFRFWFRfTUFSR0lOX1NJWkU7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5hdHRyKCdkeScsICcuMzVlbScpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsIHN0eWxlLm5vZGVUZXh0KVxyXG4gICAgICAuYXR0cigndGV4dC1hbmNob3InLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gJ2VuZCcgOiAnc3RhcnQnO1xyXG4gICAgICB9KVxyXG4gICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgIHJldHVybiBkLm5hbWU7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMCk7XHJcblxyXG4gICAgLy8gcGhhbnRvbSBub2RlIHRvIGdpdmUgdXMgbW91c2VvdmVyIGluIGEgcmFkaXVzIGFyb3VuZCBpdFxyXG4gICAgbm9kZUVudGVyLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgc3R5bGUuZ2hvc3RDaXJjbGUpXHJcbiAgICAgIC5hdHRyKCdyJywgMzApXHJcbiAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4yKSAvLyBjaGFuZ2UgdGhpcyB0byB6ZXJvIHRvIGhpZGUgdGhlIHRhcmdldCBhcmVhXHJcbiAgICAgIC5zdHlsZSgnZmlsbCcsICdyZWQnKVxyXG4gICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbW91c2VvdmVyJylcclxuICAgICAgLm9uKCdtb3VzZW92ZXInLCAobm9kZSkgPT4ge1xyXG4gICAgICAgIHRoaXMub3ZlckNpcmNsZShub2RlKTtcclxuICAgICAgfSlcclxuICAgICAgLm9uKCdtb3VzZW91dCcsIChub2RlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5vdXRDaXJjbGUobm9kZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgdGV4dCB0byByZWZsZWN0IHdoZXRoZXIgbm9kZSBoYXMgY2hpbGRyZW4gb3Igbm90LlxyXG4gICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAuYXR0cigneCcsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtVEVYVF9NQVJHSU5fU0laRSA6IFRFWFRfTUFSR0lOX1NJWkU7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAnZW5kJyA6ICdzdGFydCc7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQubmFtZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRoZSBjaXJjbGUgZmlsbCBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBoYXMgY2hpbGRyZW4gYW5kIGlzIGNvbGxhcHNlZFxyXG4gICAgbm9kZS5zZWxlY3QoYGNpcmNsZS4ke3N0eWxlLm5vZGVDaXJjbGV9YClcclxuICAgICAgLmF0dHIoJ3InLCA0LjUpXHJcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gJ2xpZ2h0c3RlZWxibHVlJyA6ICcjZmZmJztcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZVVwZGF0ZSA9IG5vZGUudHJhbnNpdGlvbigpXHJcbiAgICAgIC5kdXJhdGlvbih0aGlzLnN0YXRlLmR1cmF0aW9uKVxyXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC55ICsgJywnICsgZC54ICsgJyknO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBGYWRlIHRoZSB0ZXh0IGluXHJcbiAgICBub2RlVXBkYXRlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKS50cmFuc2l0aW9uKClcclxuICAgICAgLmR1cmF0aW9uKHRoaXMuc3RhdGUuZHVyYXRpb24pXHJcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBzb3VyY2UueSArICcsJyArIHNvdXJjZS54ICsgJyknO1xyXG4gICAgICB9KVxyXG4gICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgbm9kZUV4aXQuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAuYXR0cigncicsIDApO1xyXG5cclxuICAgIG5vZGVFeGl0LnNlbGVjdCgndGV4dCcpXHJcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMCk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBsaW5rc+KAplxyXG4gICAgdmFyIGxpbmsgPSB0aGlzLnN0YXRlLnN2Z0dyb3VwLnNlbGVjdEFsbChgcGF0aC4ke3N0eWxlLmxpbmt9YClcclxuICAgICAgLmRhdGEodGhpcy5zdGF0ZS5saW5rcywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vIEVudGVyIGFueSBuZXcgbGlua3MgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxyXG4gICAgbGluay5lbnRlcigpLmluc2VydCgncGF0aCcsICdnJylcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgc3R5bGUubGluaylcclxuICAgICAgLmF0dHIoJ2QnLCAoZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG8gPSB7XHJcbiAgICAgICAgICB4OiBzb3VyY2UueDAsXHJcbiAgICAgICAgICB5OiBzb3VyY2UueTBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5kaWFnb25hbCh7XHJcbiAgICAgICAgICBzb3VyY2U6IG8sXHJcbiAgICAgICAgICB0YXJnZXQ6IG9cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICBsaW5rLnRyYW5zaXRpb24oKVxyXG4gICAgICAuZHVyYXRpb24odGhpcy5zdGF0ZS5kdXJhdGlvbilcclxuICAgICAgLmF0dHIoJ2QnLCB0aGlzLmRpYWdvbmFsKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIGxpbmsuZXhpdCgpLnRyYW5zaXRpb24oKVxyXG4gICAgICAuZHVyYXRpb24odGhpcy5zdGF0ZS5kdXJhdGlvbilcclxuICAgICAgLmF0dHIoJ2QnLCAoZCkgPT4ge1xyXG4gICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgeDogc291cmNlLngsXHJcbiAgICAgICAgICB5OiBzb3VyY2UueVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlhZ29uYWwoe1xyXG4gICAgICAgICAgc291cmNlOiBvLFxyXG4gICAgICAgICAgdGFyZ2V0OiBvXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAvLyBTdGFzaCB0aGUgb2xkIHBvc2l0aW9ucyBmb3IgdHJhbnNpdGlvbi5cclxuICAgIHRoaXMuc3RhdGUubm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xyXG4gICAgICBkLngwID0gZC54O1xyXG4gICAgICBkLnkwID0gZC55O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBjb2xsYXBzaW5nIGFuZCBleHBhbmRpbmcgbm9kZXMuXHJcblxyXG4gIGNvbGxhcHNlID0gKGQpID0+IHtcclxuICAgIGlmIChkLmNoaWxkcmVuKSB7XHJcbiAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcbiAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZXhwYW5kID0gKGQpID0+IHtcclxuICAgIGlmIChkLl9jaGlsZHJlbikge1xyXG4gICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XHJcbiAgICAgIGQuY2hpbGRyZW4uZm9yRWFjaChleHBhbmQpO1xyXG4gICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvdmVyQ2lyY2xlID0gKGQpID0+IHtcclxuICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWROb2RlID0gZDtcclxuICAgIHRoaXMudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH07XHJcbiAgb3V0Q2lyY2xlID0gKGQpID0+IHtcclxuICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgIHRoaXMudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH07XHJcblxyXG4gIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXHJcbiAgdXBkYXRlVGVtcENvbm5lY3RvciA9ICgpID0+IHtcclxuICAgIHZhciBkYXRhID0gW107XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5kcmFnZ2luZ05vZGUgIT09IG51bGwgJiYgdGhpcy5zdGF0ZS5zZWxlY3RlZE5vZGUgIT09IG51bGwpIHtcclxuICAgICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXHJcbiAgICAgIGRhdGEgPSBbe1xyXG4gICAgICAgIHNvdXJjZToge1xyXG4gICAgICAgICAgeDogdGhpcy5zdGF0ZS5zZWxlY3RlZE5vZGUueTAsXHJcbiAgICAgICAgICB5OiB0aGlzLnN0YXRlLnNlbGVjdGVkTm9kZS54MFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICB4OiB0aGlzLnN0YXRlLmRyYWdnaW5nTm9kZS55MCxcclxuICAgICAgICAgIHk6IHRoaXMuc3RhdGUuZHJhZ2dpbmdOb2RlLngwXHJcbiAgICAgICAgfVxyXG4gICAgICB9XTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsaW5rID0gdGhpcy5zdGF0ZS5zdmdHcm91cC5zZWxlY3RBbGwoYC4ke3N0eWxlLnRlbXBsaW5rfWApLmRhdGEoZGF0YSk7XHJcblxyXG4gICAgbGluay5lbnRlcigpLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsIHN0eWxlLnRlbXBsaW5rKVxyXG4gICAgICAuYXR0cignZCcsIGQzLnN2Zy5kaWFnb25hbCgpKVxyXG4gICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG5cclxuICAgIGxpbmsuYXR0cignZCcsIGQzLnN2Zy5kaWFnb25hbCgpKTtcclxuXHJcbiAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcclxuICB9O1xyXG5cclxuICAvLyBGdW5jdGlvbiB0byBjZW50ZXIgbm9kZSB3aGVuIGNsaWNrZWQvZHJvcHBlZCBzbyBub2RlIGRvZXNuJ3QgZ2V0IGxvc3Qgd2hlbiBjb2xsYXBzaW5nL21vdmluZyB3aXRoIGxhcmdlIGFtb3VudCBvZiBjaGlsZHJlbi5cclxuXHJcbiAgdG9TdGFydFBvc2l0aW9uID0gKHNvdXJjZSwgdG9DZW50ZXIpID0+IHtcclxuICAgIGNvbnN0IHNjYWxlID0gdGhpcy56b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgIGxldCB4ID0gLXNvdXJjZS55MDtcclxuICAgIGxldCB5ID0gLXNvdXJjZS54MDtcclxuXHJcbiAgICB4ID0geCAqIHNjYWxlICsgdGhpcy5zdGF0ZS52aWV3ZXJXaWR0aCAvIDI7XHJcbiAgICB5ID0geSAqIHNjYWxlICsgdGhpcy5zdGF0ZS52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgZDMuc2VsZWN0KCdnJykudHJhbnNpdGlvbigpXHJcbiAgICAgIC5kdXJhdGlvbih0aGlzLnN0YXRlLmR1cmF0aW9uKVxyXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeCArICcsJyArIHkgKyAnKXNjYWxlKCcgKyBzY2FsZSArICcpJyk7XHJcbiAgICB0aGlzLnpvb21MaXN0ZW5lci5zY2FsZShzY2FsZSk7XHJcbiAgICB0aGlzLnpvb21MaXN0ZW5lci50cmFuc2xhdGUoW3gsIHldKTtcclxuICB9XHJcblxyXG4gIGVuZERyYWcgPSAoZG9tTm9kZSkgPT4ge1xyXG4gICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgZDMuc2VsZWN0QWxsKGAuJHtzdHlsZS5naG9zdENpcmNsZX1gKS5hdHRyKCdjbGFzcycsIHN0eWxlLmdob3N0Q2lyY2xlKTtcclxuICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsIHN0eWxlLm5vZGUpO1xyXG4gICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdChgLiR7c3R5bGUuZ2hvc3RDaXJjbGV9YCkuYXR0cigncG9pbnRlci1ldmVudHMnLCAnJyk7XHJcbiAgICB0aGlzLnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgIGlmICh0aGlzLnN0YXRlLmRyYWdnaW5nTm9kZSAhPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLnVwZGF0ZSh0aGlzLnN0YXRlLnJvb3QpO1xyXG4gICAgICB0aGlzLnRvU3RhcnRQb3NpdGlvbih0aGlzLnN0YXRlLmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmdOb2RlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVRyZWUgPSAodHJlZURhdGEsIHRvU3RhcnQpID0+IHtcclxuICAgIC8vIEEgcmVjdXJzaXZlIGhlbHBlciBmdW5jdGlvbiBmb3IgcGVyZm9ybWluZyBzb21lIHNldHVwIGJ5IHdhbGtpbmcgdGhyb3VnaCBhbGwgbm9kZXNcclxuICAgIGZ1bmN0aW9uIHZpc2l0KHBhcmVudCwgdmlzaXRGbiwgY2hpbGRyZW5Gbikge1xyXG4gICAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgdmlzaXRGbihwYXJlbnQpO1xyXG5cclxuICAgICAgdmFyIGNoaWxkcmVuID0gY2hpbGRyZW5GbihwYXJlbnQpO1xyXG4gICAgICBpZiAoY2hpbGRyZW4pIHtcclxuICAgICAgICB2YXIgY291bnQgPSBjaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICB2aXNpdChjaGlsZHJlbltpXSwgdmlzaXRGbiwgY2hpbGRyZW5Gbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsbCB2aXNpdCBmdW5jdGlvbiB0byBlc3RhYmxpc2ggbWF4TGFiZWxMZW5ndGhcclxuICAgIHZpc2l0KHRyZWVEYXRhLCAoeyBuYW1lID0gJycgfSkgPT4ge1xyXG4gICAgICB0aGlzLnN0YXRlLnRvdGFsTm9kZXMrKztcclxuICAgICAgdGhpcy5zdGF0ZS5tYXhMYWJlbExlbmd0aCA9IE1hdGgubWF4KG5hbWUubGVuZ3RoLCB0aGlzLnN0YXRlLm1heExhYmVsTGVuZ3RoKTtcclxuICAgIH0sIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgIHJldHVybiBkLmNoaWxkcmVuICYmIGQuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGQuY2hpbGRyZW4gOiBudWxsO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSByb290XHJcbiAgICB0aGlzLnN0YXRlLnJvb3QgPSB0cmVlRGF0YTtcclxuXHJcbiAgICB0aGlzLnN0YXRlLnJvb3QueDAgPSB0aGlzLnN0YXRlLnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICB0aGlzLnN0YXRlLnJvb3QueTAgPSAwO1xyXG5cclxuICAgIC8vIExheW91dCB0aGUgdHJlZSBpbml0aWFsbHkgYW5kIGNlbnRlciBvbiB0aGUgcm9vdCBub2RlLlxyXG4gICAgdGhpcy51cGRhdGUodGhpcy5zdGF0ZS5yb290KTtcclxuXHJcbiAgICBpZiAodG9TdGFydCkge1xyXG4gICAgICB0aGlzLnRvU3RhcnRQb3NpdGlvbih0aGlzLnN0YXRlLnJvb3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoeyByb290Tm9kZSwgdHJlZURhdGEgPSBbXSwgb25EcmFnRW5kID0gKCkgPT4ge30gfSkge1xyXG5cclxuICAgIHRoaXMuY2xlYW51cChyb290Tm9kZSk7XHJcblxyXG4gICAgLy8gcGFubmluZyB2YXJpYWJsZXNcclxuICAgIGNvbnN0IHBhblNwZWVkID0gMjAwO1xyXG4gICAgY29uc3QgcGFuQm91bmRhcnkgPSAyMDsgLy8gV2l0aGluIDIwcHggZnJvbSBlZGdlcyB3aWxsIHBhbiB3aGVuIGRyYWdnaW5nLlxyXG5cclxuICAgIHRoaXMuc3RhdGUudmlld2VyV2lkdGggPSByb290Tm9kZS5vZmZzZXRXaWR0aDtcclxuICAgIHRoaXMuc3RhdGUudmlld2VySGVpZ2h0ID0gcm9vdE5vZGUub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgIHRoaXMuc3RhdGUudHJlZSA9IGQzLmxheW91dC50cmVlKCkuc2l6ZShbdGhpcy5zdGF0ZS52aWV3ZXJIZWlnaHQsIHRoaXMuc3RhdGUudmlld2VyV2lkdGhdKTtcclxuXHJcbiAgICAvLyAvLyBzb3J0IHRoZSB0cmVlIGFjY29yZGluZyB0byB0aGUgbm9kZSBuYW1lc1xyXG4gICAgLy9cclxuICAgIC8vIGZ1bmN0aW9uIHNvcnRUcmVlKCkge1xyXG4gICAgLy8gICB0cmVlLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgLy8gICAgIHJldHVybiBiLm5hbWUudG9Mb3dlckNhc2UoKSA8IGEubmFtZS50b0xvd2VyQ2FzZSgpID8gMSA6IC0xO1xyXG4gICAgLy8gICB9KTtcclxuICAgIC8vIH1cclxuICAgIC8vIC8vIFNvcnQgdGhlIHRyZWUgaW5pdGlhbGx5IGluY2FzZSB0aGUgSlNPTiBpc24ndCBpbiBhIHNvcnRlZCBvcmRlci5cclxuICAgIC8vIHNvcnRUcmVlKCk7XHJcblxyXG4gICAgLy8gVE9ETzogUGFuIGZ1bmN0aW9uLCBjYW4gYmUgYmV0dGVyIGltcGxlbWVudGVkLlxyXG4gICAgbGV0IHRyYW5zbGF0ZVgsIHRyYW5zbGF0ZVk7XHJcblxyXG4gICAgY29uc3QgcGFuID0gKGRvbU5vZGUsIGRpcmVjdGlvbikgPT4ge1xyXG4gICAgICB2YXIgc3BlZWQgPSBwYW5TcGVlZDtcclxuICAgICAgaWYgKHRoaXMuc3RhdGUucGFuVGltZXIpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZS5wYW5UaW1lcik7XHJcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlQ29vcmRzID0gZDMudHJhbnNmb3JtKHRoaXMuc3RhdGUuc3ZnR3JvdXAuYXR0cigndHJhbnNmb3JtJykpO1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICB0cmFuc2xhdGVYID0gZGlyZWN0aW9uID09ICdsZWZ0JyA/IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF0gKyBzcGVlZCA6IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF0gLSBzcGVlZDtcclxuICAgICAgICAgIHRyYW5zbGF0ZVkgPSB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09ICd1cCcgfHwgZGlyZWN0aW9uID09ICdkb3duJykge1xyXG4gICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF07XHJcbiAgICAgICAgICB0cmFuc2xhdGVZID0gZGlyZWN0aW9uID09ICd1cCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdIC0gc3BlZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNjYWxlWCA9IHRyYW5zbGF0ZUNvb3Jkcy5zY2FsZVswXTtcclxuICAgICAgICBjb25zdCBzY2FsZVkgPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMV07XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc3ZnR3JvdXAudHJhbnNpdGlvbigpLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHRyYW5zbGF0ZVggKyAnLCcgKyB0cmFuc2xhdGVZICsgJylzY2FsZSgnICsgc2NhbGUgKyAnKScpO1xyXG4gICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoYGcuJHtzdHlsZS5ub2RlfWApLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHRyYW5zbGF0ZVggKyAnLCcgKyB0cmFuc2xhdGVZICsgJyknKTtcclxuICAgICAgICB0aGlzLnpvb21MaXN0ZW5lci5zY2FsZSh0aGlzLnpvb21MaXN0ZW5lci5zY2FsZSgpKTtcclxuICAgICAgICB0aGlzLnpvb21MaXN0ZW5lci50cmFuc2xhdGUoW3RyYW5zbGF0ZVgsIHRyYW5zbGF0ZVldKTtcclxuICAgICAgICB0aGlzLnpvb21MaXN0ZW5lci50cmFuc2xhdGUoW3RyYW5zbGF0ZVgsIHRyYW5zbGF0ZVldKTtcclxuICAgICAgICB0aGlzLnN0YXRlLnBhblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBwYW4oZG9tTm9kZSwgc3BlZWQsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgfSwgNTApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW5pdGlhdGVEcmFnID0gKGQsIGRvbU5vZGUpID0+IHtcclxuICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZ05vZGUgPSBkO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KGAuJHtzdHlsZS5naG9zdENpcmNsZX1gKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIGQzLnNlbGVjdEFsbChgLiR7c3R5bGUuZ2hvc3RDaXJjbGV9YCkuYXR0cignY2xhc3MnLCBgJHtzdHlsZS5naG9zdENpcmNsZX0gJHtzdHlsZS5zaG93fWApO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCBgJHtzdHlsZS5ub2RlfSAke3N0eWxlLmFjdGl2ZURyYWd9YCk7XHJcblxyXG4gICAgICB0aGlzLnN0YXRlLnN2Z0dyb3VwLnNlbGVjdEFsbChgZy4ke3N0eWxlLm5vZGV9YCkuc29ydCgoYSwgYikgPT4geyAvLyBzZWxlY3QgdGhlIHBhcmVudCBhbmQgc29ydCB0aGUgcGF0aCdzXHJcbiAgICAgICAgaWYgKGEuaWQgIT0gdGhpcy5zdGF0ZS5kcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kICdhJyB0byB0aGUgYmFja1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIC0xOyAvLyBhIGlzIHRoZSBob3ZlcmVkIGVsZW1lbnQsIGJyaW5nICdhJyB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcclxuICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIC8vIHJlbW92ZSBsaW5rIHBhdGhzXHJcbiAgICAgICAgY29uc3QgbGlua3MgPSB0aGlzLnN0YXRlLnRyZWUubGlua3ModGhpcy5zdGF0ZS5ub2Rlcyk7XHJcbiAgICAgICAgY29uc3Qgbm9kZVBhdGhzID0gdGhpcy5zdGF0ZS5zdmdHcm91cC5zZWxlY3RBbGwoYHBhdGguJHtzdHlsZS5saW5rfWApXHJcbiAgICAgICAgICAuZGF0YShsaW5rcywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgY29uc3Qgbm9kZXNFeGl0ID0gdGhpcy5zdGF0ZS5zdmdHcm91cC5zZWxlY3RBbGwoYGcuJHtzdHlsZS5ub2RlfWApXHJcbiAgICAgICAgICAuZGF0YSh0aGlzLnN0YXRlLm5vZGVzLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZC5pZDtcclxuICAgICAgICAgIH0pLmZpbHRlcigoZCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZC5pZCA9PSB0aGlzLnN0YXRlLmRyYWdnaW5nTm9kZS5pZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZW1vdmUgcGFyZW50IGxpbmtcclxuICAgICAgY29uc3QgcGFyZW50TGluayA9IHRoaXMuc3RhdGUudHJlZS5saW5rcyh0aGlzLnN0YXRlLnRyZWUubm9kZXModGhpcy5zdGF0ZS5kcmFnZ2luZ05vZGUucGFyZW50KSk7XHJcbiAgICAgIHRoaXMuc3RhdGUuc3ZnR3JvdXAuc2VsZWN0QWxsKGBwYXRoLiR7c3R5bGUubGlua31gKS5maWx0ZXIoKGQsIGkpID0+IHtcclxuICAgICAgICBpZiAoZC50YXJnZXQuaWQgPT0gdGhpcy5zdGF0ZS5kcmFnZ2luZ05vZGUuaWQpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgdGhpcy5zdGF0ZS5kcmFnU3RhcnRlZCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGVmaW5lIHRoZSBiYXNlU3ZnLCBhdHRhY2hpbmcgYSBjbGFzcyBmb3Igc3R5bGluZyBhbmQgdGhlIHpvb21MaXN0ZW5lclxyXG4gICAgY29uc3QgYmFzZVN2ZyA9IGQzLnNlbGVjdChyb290Tm9kZSkuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAuYXR0cignd2lkdGgnLCB0aGlzLnN0YXRlLnZpZXdlcldpZHRoKVxyXG4gICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5zdGF0ZS52aWV3ZXJIZWlnaHQpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsIHN0eWxlLm92ZXJsYXkpXHJcbiAgICAgIC5jYWxsKHRoaXMuem9vbUxpc3RlbmVyKTtcclxuXHJcbiAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxyXG4gICAgdGhpcy5zdGF0ZS5kcmFnTGlzdGVuZXIgPSBkMy5iZWhhdmlvci5kcmFnKClcclxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCAoZCkgPT4ge1xyXG4gICAgICAgIGlmIChkID09IHNlbGYuc3RhdGUucm9vdCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnN0YXRlLmRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICBzZWxmLnN0YXRlLm5vZGVzID0gc2VsZi5zdGF0ZS50cmVlLm5vZGVzKGQpO1xyXG4gICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIC8vIGl0J3MgaW1wb3J0YW50IHRoYXQgd2Ugc3VwcHJlc3MgdGhlIG1vdXNlb3ZlciBldmVudCBvbiB0aGUgbm9kZSBiZWluZyBkcmFnZ2VkLiBPdGhlcndpc2UgaXQgd2lsbCBhYnNvcmIgdGhlIG1vdXNlb3ZlciBldmVudCBhbmQgdGhlIHVuZGVybHlpbmcgbm9kZSB3aWxsIG5vdCBkZXRlY3QgaXQgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgICAgfSlcclxuICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICBpZiAoZCA9PSByb290KSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLnN0YXRlLmRyYWdTdGFydGVkKSB7XHJcbiAgICAgICAgICBpbml0aWF0ZURyYWcoZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBnZXQgY29vcmRzIG9mIG1vdXNlRXZlbnQgcmVsYXRpdmUgdG8gc3ZnIGNvbnRhaW5lciB0byBhbGxvdyBmb3IgcGFubmluZ1xyXG4gICAgICAgIGNvbnN0IHJlbENvb3JkcyA9IGQzLm1vdXNlKGJhc2VTdmdbMF1bMF0pO1xyXG4gICAgICAgIGlmIChyZWxDb29yZHNbMF0gPCBwYW5Cb3VuZGFyeSkge1xyXG4gICAgICAgICAgc2VsZi5zdGF0ZS5wYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICBwYW4odGhpcywgJ2xlZnQnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlbENvb3Jkc1swXSA+IChiYXNlU3ZnWzBdWzBdLmlubmVyV2lkdGggLSBwYW5Cb3VuZGFyeSkpIHtcclxuICAgICAgICAgIHNlbGYuc3RhdGUucGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgcGFuKHRoaXMsICdyaWdodCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdIDwgcGFuQm91bmRhcnkpIHtcclxuICAgICAgICAgIHNlbGYuc3RhdGUucGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgcGFuKHRoaXMsICd1cCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdID4gKGJhc2VTdmdbMF1bMF0uaW5uZXJIZWlnaHQgLSBwYW5Cb3VuZGFyeSkpIHtcclxuICAgICAgICAgIHNlbGYuc3RhdGUucGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgcGFuKHRoaXMsICdkb3duJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLnN0YXRlLnBhblRpbWVyKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkLngwICs9IGQzLmV2ZW50LmR5O1xyXG4gICAgICAgIGQueTAgKz0gZDMuZXZlbnQuZHg7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBkMy5zZWxlY3QodGhpcyk7XHJcbiAgICAgICAgbm9kZS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBkLnkwICsgJywnICsgZC54MCArICcpJyk7XHJcbiAgICAgICAgc2VsZi51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgICAgIH0pLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICBpZiAoZCA9PSBzZWxmLnN0YXRlLnJvb3QpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkb21Ob2RlID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKHNlbGYuc3RhdGUuc2VsZWN0ZWROb2RlKSB7XHJcbiAgICAgICAgICBvbkRyYWdFbmQoc2VsZi5zdGF0ZS5zZWxlY3RlZE5vZGUpO1xyXG5cclxuICAgICAgICAgIC8vIG5vdyByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgcGFyZW50LCBhbmQgaW5zZXJ0IGl0IGludG8gdGhlIG5ldyBlbGVtZW50cyBjaGlsZHJlblxyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSBzZWxmLnN0YXRlLmRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihzZWxmLnN0YXRlLmRyYWdnaW5nTm9kZSk7XHJcblxyXG4gICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgc2VsZi5zdGF0ZS5kcmFnZ2luZ05vZGUucGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHNlbGYuc3RhdGUuc2VsZWN0ZWROb2RlLmNoaWxkcmVuICE9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygc2VsZi5zdGF0ZS5zZWxlY3RlZE5vZGUuX2NoaWxkcmVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlbGYuc3RhdGUuc2VsZWN0ZWROb2RlLmNoaWxkcmVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgIHNlbGYuc3RhdGUuc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goc2VsZi5zdGF0ZS5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNlbGYuc3RhdGUuc2VsZWN0ZWROb2RlLl9jaGlsZHJlbi5wdXNoKHNlbGYuc3RhdGUuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zdGF0ZS5zZWxlY3RlZE5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgICAgICAgICAgc2VsZi5zdGF0ZS5zZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaChzZWxmLnN0YXRlLmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbm9kZSBiZWluZyBhZGRlZCB0byBpcyBleHBhbmRlZCBzbyB1c2VyIGNhbiBzZWUgYWRkZWQgbm9kZSBpcyBjb3JyZWN0bHkgbW92ZWRcclxuICAgICAgICAgIHNlbGYuZXhwYW5kKHNlbGYuc3RhdGUuc2VsZWN0ZWROb2RlKTtcclxuXHJcbiAgICAgICAgICAvLyBzb3J0VHJlZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5lbmREcmFnKGRvbU5vZGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBUb2dnbGUgY2hpbGRyZW4gZnVuY3Rpb25cclxuXHJcbiAgICBmdW5jdGlvbiB0b2dnbGVDaGlsZHJlbihkKSB7XHJcbiAgICAgIGlmIChkLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgICB9IGVsc2UgaWYgKGQuX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xyXG4gICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUb2dnbGUgY2hpbGRyZW4gb24gY2xpY2suXHJcblxyXG4gICAgdGhpcy5zdGF0ZS5jbGljayA9IChkKSA9PiB7XHJcbiAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47IC8vIGNsaWNrIHN1cHByZXNzZWRcclxuICAgICAgZCA9IHRvZ2dsZUNoaWxkcmVuKGQpO1xyXG4gICAgICB0aGlzLnVwZGF0ZShkKTtcclxuICAgICAgdGhpcy50b1N0YXJ0UG9zaXRpb24oZCwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMuc3RhdGUub25DbGlja05vZGUoZCwgIWQuX2NoaWxkcmVuKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQXBwZW5kIGEgZ3JvdXAgd2hpY2ggaG9sZHMgYWxsIG5vZGVzIGFuZCB3aGljaCB0aGUgem9vbSBMaXN0ZW5lciBjYW4gYWN0IHVwb24uXHJcbiAgICB0aGlzLnN0YXRlLnN2Z0dyb3VwID0gYmFzZVN2Zy5hcHBlbmQoJ2cnKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVRyZWUodHJlZURhdGEsdHJ1ZSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IFNob3dUcmVlIGZyb20gJy4vYXBwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3dUcmVlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQoZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImRlZmF1bHRcImluIGU/ZS5kZWZhdWx0OmV9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIFJlYWN0PV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpO2Z1bmN0aW9uIEFwcENvbnRhaW5lcihlKXtyZXR1cm4gUmVhY3QuQ2hpbGRyZW4ub25seShlLmNoaWxkcmVuKX12YXIgaG90X3Byb2Q9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSxhcmVDb21wb25lbnRzRXF1YWw9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gZT09PW59LHNldENvbmZpZz1mdW5jdGlvbigpe30sY29sZD1mdW5jdGlvbihlKXtyZXR1cm4gZX0sY29uZmlndXJlQ29tcG9uZW50PWZ1bmN0aW9uKCl7fTtleHBvcnRzLkFwcENvbnRhaW5lcj1BcHBDb250YWluZXIsZXhwb3J0cy5ob3Q9aG90X3Byb2QsZXhwb3J0cy5hcmVDb21wb25lbnRzRXF1YWw9YXJlQ29tcG9uZW50c0VxdWFsLGV4cG9ydHMuc2V0Q29uZmlnPXNldENvbmZpZyxleHBvcnRzLmNvbGQ9Y29sZCxleHBvcnRzLmNvbmZpZ3VyZUNvbXBvbmVudD1jb25maWd1cmVDb21wb25lbnQ7XG4iXSwic291cmNlUm9vdCI6IiJ9